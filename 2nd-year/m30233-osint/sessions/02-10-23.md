# IP Addresses and Subnetting I 09:00 02/10/23

- Layer 3 networking is the layer that handles routing data between networks, such as a local and wide area network
- Layer 3 functionality is spread over the network - in routers as well as client devices

## Internet Protocol

- Connectionless
- Best effort delivery
  - Unreliable
  - Packets may not arrive at all, or in the wrong order
  - There is no built-in error handling other than error checking
- When transmitting
  - Encapsulates data from the transport layer in datagrams
  - Adds header data to the datagrams (source and destination addresses, time to live, etc)
  - Apply the routing algorithm once on the internet
  - Will continue to route the packet until either it reaches the target network card, or exceedes it's time to live
- When receiving
  - Check the validity of all datagrams
  - Reads the header and checks if forwarding is needed
    - If the destination address is on the LAN, send the datagram to the destination
    - If it isn't, relay it to the next router on it's route

### IPv4 & Subnetting

- 32-bit string
  - 4*8 bit integers (1 byte, or 1 octet)
  - Each byte can be 0-255
  - Intended to be human-readable
  - Allows for $2^32$ or $4,294,967,296$ theoretical addresses, less in practice
- The IP address is split into two fields
  - The Network Prefix
  - The Host ID
  - Any devices with the same network prefix are on one network
  - Two devices cannot have the same Host ID
- The network prefix can be 8, 16 or 24 bits in length, leaving 24, 16 or 8 bits for Host IDs
- There are 3 main classes of IP addresses
  - Class A: Network prefix always starts with 0, followed by 7 bits, and 24 bits for the Host ID (1.X.X.X - 126.X.X.X)
  - Class B: Network prefix always starts with 10, followed by 14 bits, and 16 bits for the Host ID (128.0.X.X.X - 191.255.X.X)
  - Class C: Network prefix always starts with 110, followed by 21 bits, and 8 bits for the Host ID (192.0.0.X - 223.255.255.X)
- There are also 2 more reserved classes
  - Class D: Network prefix starts with 1110, followed by a 28 bit multicast ID (224.X.X.X - 239.X.X.X)
  - Class E: Network prefix starts with 1111, followed by 28 bits reserved for experimentation (240.X.X.X - 255.X.X.X)
- The Class A network 127.X.X.X is reserved for loopback addresses, every computer has 127.0.0.1 as a loopback address, some computers may have more than 1
- Each class of network has 2 less usable host addresses than would be expected, e.g.
  - A class A network provides $2^24 - 2$ host addresses ($16,777,214$)
  - A class B network provides $2^16 - 2$ host addresses ($65,634$)
  - A class C network provides $2^8 - 2$ host addresses ($254$)
- This is because X.X.X.0 is the network address, which cannot be assigned to a computer, and X.X.X.255 is used as the network's broadcast address

### Subnet Masks

- A subnet mask tells the computer which parts of the IP address are reserved for the network prefix
- The default subnet mask for each class is as follows:
  - Class A: 255.0.0.0
  - Class B: 255.255.0.0
  - Class C: 255.255.255.0
- The subnet mask also determines how many devices can be on the network at a time, as it sets how many bits are left for the Host ID
- A network address is the network prefix, with all host bits set to 0, e.g.
  - The network address of 10.128.47.87 is 10.0.0.0
  - The network address of 192.168.10.104 is 192.168.10.0